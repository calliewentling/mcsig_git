(self.webpackChunk=self.webpackChunk||[]).push([[3747],{5555:function(e,n,r){"use strict";var t=r(9341),o=r(5277),a=r(5659),u=r(3919),i=r(4104),c=r(1625),f=r(7292),l=r(5367),s=r(6363),w=r(640),v=r(7340),p=r(1940),m=r(7842),y=r(710);function g(e,n){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}function h(e,n,r){var t=g(n,e),o=g(n,r),a=((e[0]-n[0])*(r[0]-n[0])+(e[1]-n[1])*(r[1]-n[1]))/o;return Math.abs(t-a)<1e-6&&t<o}function d(e,n){return(e%n+n)%n}function b(e,n,r){var t=e.getGeometry();"MultiPolygon"===t.getType()&&(t=t.getPolygon(0));var o,a,u,i=t.getLinearRing().getCoordinates(),c=-1;for(o=0;o<i.length;o++)if(h(n,a=i[o],u=i[d(o+1,i.length)])){c=o;break}var f=[],l=0,s=[],w=0;for(o=0;o<i.length;o++){if(a=0===o?n:i[d(o+c,i.length)],u=i[d(o+c+1,i.length)],f.push(a),h(r,a,u)){f.push(r),l+=g(a,r);break}l+=g(a,u)}for(o=0;o<i.length;o++){if(a=i[d(c-o,i.length)],u=0===o?n:i[d(c-o+1,i.length)],s.push(u),h(r,a,u)){s.push(r),w+=g(r,u);break}w+=g(a,u)}return w<l?s:f}var k,M,T,q,A=new m.Z({source:new v.Z}),E=new y.Z({source:new p.Z({format:new u.Z,url:"https://ahocevar.com/geoserver/wfs?service=wfs&request=getfeature&typename=topp:states&cql_filter=STATE_NAME='Idaho'&outputformat=application/json"})}),N=new y.Z({source:new p.Z,style:new s.ZP({stroke:new l.Z({color:"rgba(100, 255, 0, 1)",width:2}),fill:new a.Z({color:"rgba(100, 255, 0, 0.3)"})})}),_=new o.Z({geometry:new i.Z([])}),j=new y.Z({source:new p.Z({features:[_]}),style:new s.ZP({stroke:new l.Z({color:"rgba(255, 0, 0, 1)",width:2})})}),z=new c.Z({layers:[A,E,N,j],target:"map",view:new w.ZP({center:[-12986427,5678422],zoom:5})}),F=!1,I={hitTolerance:10,layerFilter:function(e){return e===E}};z.on("click",(function(e){if(F){var n=!1;z.forEachFeatureAtPixel(e.pixel,(function(r){if(!M||r===M){n=!0;var t=z.getCoordinateFromPixel(e.pixel);if(r===M){q=M.getGeometry().getClosestPoint(t);var o=b(M,T,q);k.removeLastPoint(),k.appendCoordinates(o),M=null}T=(M=r).getGeometry().getClosestPoint(t)}}),I),n||(_.getGeometry().setCoordinates([]),M=null)}})),z.on("pointermove",(function(e){if(M&&F){var n=null;z.forEachFeatureAtPixel(e.pixel,(function(r){M===r&&(n=z.getCoordinateFromPixel(e.pixel))}),I);var r=[];n&&(q=M.getGeometry().getClosestPoint(n),r=b(M,T,q)),_.getGeometry().setCoordinates(r)}}));var P=new f.Z({source:E.getSource()}),S=document.getElementById("type");function x(){"None"!==S.value&&((k=new t.ZP({source:N.getSource(),type:S.value})).on("drawstart",(function(){F=!0})),k.on("drawend",(function(){F=!1,_.getGeometry().setCoordinates([]),M=null})),z.addInteraction(k),z.addInteraction(P))}S.onchange=function(){z.removeInteraction(k),z.removeInteraction(P),x()},x()}},function(e){"use strict";var n;n=5555,e(e.s=n)}]);
//# sourceMappingURL=tracing.js.map