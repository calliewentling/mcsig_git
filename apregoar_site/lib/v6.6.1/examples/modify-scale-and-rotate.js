(self.webpackChunk=self.webpackChunk||[]).push([[7545],{7627:function(e,n,r){"use strict";var t=r(1625),o=r(640),i=r(6363),f=r(5659),a=r(5367),c=r(7389),u=r(5356),s=r(1875),m=r(9341),w=r(1622),y=r(5957),d=r(7340),l=r(1940),v=r(7842),g=r(710),h=r(6666),M=r(2049),G=new v.Z({source:new d.Z}),p=new l.Z,C=new i.ZP({geometry:function(e){var n=e.get("modifyGeometry");return n?n.geometry:e.getGeometry()},fill:new f.Z({color:"rgba(255, 255, 255, 0.2)"}),stroke:new a.Z({color:"#ffcc33",width:2}),image:new c.Z({radius:7,fill:new f.Z({color:"#ffcc33"})})});function b(e){var n,r,t,o,i=e.getType();if("Polygon"===i){var f=0,a=0,c=0;(r=e.getCoordinates()[0].slice(1)).forEach((function(e){f+=e[0],a+=e[1],c++})),n=[f/c,a/c]}else"LineString"===i?(n=e.getCoordinateAt(.5),r=e.getCoordinates()):n=(0,h.qg)(e.getExtent());return r?(o=r.map((function(e){var r=e[0]-n[0],t=e[1]-n[1];return r*r+t*t})),t=Math.sqrt(Math.max.apply(Math,o))/3):t=Math.max((0,h.dz)(e.getExtent()),(0,h.Cr)(e.getExtent()))/3,{center:n,coordinates:r,minRadius:t,sqDistances:o}}var k,q=new g.Z({source:p,style:function(e){var n=[C],r=e.get("modifyGeometry"),t=b(r?r.geometry:e.getGeometry()),o=t.center;if(o){n.push(new i.ZP({geometry:new w.Z(o),image:new c.Z({radius:4,fill:new f.Z({color:"#ff3333"})})}));var a=t.coordinates;if(a){var u=t.minRadius,s=t.sqDistances,m=u*u,d=a.filter((function(e,n){return s[n]>m}));n.push(new i.ZP({geometry:new y.Z(d),image:new c.Z({radius:4,fill:new f.Z({color:"#33cc33"})})}))}}return n}}),x=new t.Z({layers:[G,q],target:"map",view:new o.ZP({center:[-11e6,46e5],zoom:4})}),z=new u.Z({source:p}).getOverlay().getStyleFunction(),D=new u.Z({source:p,condition:function(e){return(0,M.Xp)(e)&&!(0,M.QC)(e)},deleteCondition:M.Fi,insertVertexCondition:M.Fi,style:function(e){return e.get("features").forEach((function(n){var r=n.get("modifyGeometry");if(r){var t=e.getGeometry().getCoordinates(),o=r.point;if(!o){o=t,r.point=o,r.geometry0=r.geometry;var i=b(r.geometry0);r.center=i.center,r.minRadius=i.minRadius}var f,a,c=r.center,u=r.minRadius;f=o[0]-c[0],a=o[1]-c[1];var s=Math.sqrt(f*f+a*a);if(s>u){var m=Math.atan2(a,f);f=t[0]-c[0],a=t[1]-c[1];var w=Math.sqrt(f*f+a*a);if(w>0){var y=Math.atan2(a,f),d=r.geometry0.clone();d.scale(w/s,void 0,c),d.rotate(y-m,c),r.geometry=d}}}})),z(e)}});D.on("modifystart",(function(e){e.features.forEach((function(e){e.set("modifyGeometry",{geometry:e.getGeometry().clone()},!0)}))})),D.on("modifyend",(function(e){e.features.forEach((function(e){var n=e.get("modifyGeometry");n&&(e.setGeometry(n.geometry),e.unset("modifyGeometry",!0))}))})),x.addInteraction(D),x.addInteraction(new s.Z({condition:function(e){return(0,M.Xp)(e)&&(0,M.QC)(e)},layers:[q]}));var L=document.getElementById("type");function P(){k=new m.ZP({source:p,type:L.value}),x.addInteraction(k)}L.onchange=function(){x.removeInteraction(k),P()},P()}},function(e){"use strict";var n;n=7627,e(e.s=n)}]);
//# sourceMappingURL=modify-scale-and-rotate.js.map