(self.webpackChunk=self.webpackChunk||[]).push([[3465],{3818:function(r,t,n){"use strict";var e=n(5277),o=n(1625),a=n(1622),i=n(8557),u=n(4104),c=n(2294),f=n(4158);function s(r,t,n,e,o,a){var i,u;void 0!==o?(i=o,u=void 0!==a?a:0):(i=[],u=0);for(var c=t;c<n;){var f=r[c++];i[u++]=r[c++],i[u++]=f;for(var s=2;s<e;++s)i[u++]=r[c++]}return i.length=u,i}var v=n(4589),w=n(7889),p=n(9445),h=n(3345);function m(r){for(var t,n="";r>=32;)t=63+(32|31&r),n+=String.fromCharCode(t),r>>=5;return t=r+63,n+=String.fromCharCode(t)}var l=function(r){function t(t){r.call(this);var n=t||{};this.dataProjection=(0,v.U2)("EPSG:4326"),this.t=n.factor?n.factor:1e5,this.o=n.geometryLayout?n.geometryLayout:i.Z.XY}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.readFeatureFromText=function(r,t){var n=this.readGeometryFromText(r,t);return new e.Z(n)},t.prototype.readFeaturesFromText=function(r,t){return[this.readFeatureFromText(r,t)]},t.prototype.readGeometryFromText=function(r,t){var n=(0,w.tP)(this.o),e=function(r,t,n){var e,o=n||1e5,a=new Array(t);for(e=0;e<t;++e)a[e]=0;for(var i=function(r,t){for(var n=t||1e5,e=function(r){for(var t=function(r){for(var t=[],n=0,e=0,o=0,a=r.length;o<a;++o){var i=r.charCodeAt(o)-63;n|=(31&i)<<e,i<32?(t.push(n),n=0,e=0):e+=5}return t}(r),n=0,e=t.length;n<e;++n){var o=t[n];t[n]=1&o?~(o>>1):o>>1}return t}(r),o=0,a=e.length;o<a;++o)e[o]/=n;return e}(r,o),u=0,c=i.length;u<c;)for(e=0;e<t;++e,++u)a[e]+=i[u],i[u]=a[e];return i}(r,n,this.t);s(e,0,e.length,n,e);var o=(0,p.Ml)(e,0,e.length,n),a=new u.Z(o,this.o);return(0,h.fI)(a,!1,this.adaptOptions(t))},t.prototype.writeFeatureText=function(r,t){var n=r.getGeometry();return n?this.writeGeometryText(n,t):((0,f.h)(!1,40),"")},t.prototype.writeFeaturesText=function(r,t){return this.writeFeatureText(r[0],t)},t.prototype.writeGeometryText=function(r,t){var n=(r=(0,h.fI)(r,!0,this.adaptOptions(t))).getFlatCoordinates(),e=r.getStride();return s(n,0,n.length,e,n),function(r,t,n){var e,o=n||1e5,a=new Array(t);for(e=0;e<t;++e)a[e]=0;for(var i=0,u=r.length;i<u;)for(e=0;e<t;++e,++i){var c=r[i],f=c-a[e];a[e]=c,r[i]=f}return function(r,t){for(var n=t||1e5,e=0,o=r.length;e<o;++e)r[e]=Math.round(r[e]*n);return function(r){for(var t=0,n=r.length;t<n;++t){var e=r[t];r[t]=e<0?~(e<<1):e<<1}return function(r){for(var t="",n=0,e=r.length;n<e;++n)t+=m(r[n]);return t}(r)}(r)}(r,o)}(n,e,this.t)},t}(c.Z),y=n(1940),g=n(640),d=n(6343),k=n(6363),S=n(5367),b=n(5225),j=n(7389),z=n(5659),A=n(7842),M=n(710),P=n(9923),_=new o.Z({target:document.getElementById("map"),view:new g.ZP({center:[-5639523.95,-3501274.52],zoom:10,minZoom:2,maxZoom:19}),layers:[new A.Z({source:new d.Z({attributions:'<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=get_your_own_D6rA4zTHduk6KOKTXzGB",tileSize:512})})]});fetch("data/polyline/route.json").then((function(r){r.json().then((function(r){var t=r.routes[0].geometry,n=new l({factor:1e6}).readGeometry(t,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),o=new e.Z({type:"route",geometry:n}),i=new e.Z({type:"icon",geometry:new a.Z(n.getFirstCoordinate())}),u=new e.Z({type:"icon",geometry:new a.Z(n.getLastCoordinate())}),c=i.getGeometry().clone(),f=new e.Z({type:"geoMarker",geometry:c}),s={route:new k.ZP({stroke:new S.Z({width:6,color:[237,212,0,.8]})}),icon:new k.ZP({image:new b.Z({anchor:[.5,1],src:"data/icon.png"})}),geoMarker:new k.ZP({image:new j.Z({radius:7,fill:new z.Z({color:"black"}),stroke:new S.Z({color:"white",width:2})})})},v=new M.Z({source:new y.Z({features:[o,f,i,u]}),style:function(r){return s[r.get("type")]}});_.addLayer(v);var w,p=document.getElementById("speed"),h=document.getElementById("start-animation"),m=!1,g=0;function d(r){var t=Number(p.value),e=r.frameState.time;g=(g+t*(e-w)/1e6)%2,w=e;var o=n.getCoordinateAt(g>1?2-g:g);c.setCoordinates(o);var a=(0,P.u3)(r);a.setStyle(s.geoMarker),a.drawGeometry(c),_.render()}h.addEventListener("click",(function(){m?(m=!1,h.textContent="Start Animation",f.setGeometry(c),v.un("postrender",d)):(m=!0,w=Date.now(),h.textContent="Stop Animation",v.on("postrender",d),f.setGeometry(null))}))}))}))}},function(r){"use strict";var t;t=3818,r(r.s=t)}]);
//# sourceMappingURL=feature-move-animation.js.map