(self.webpackChunk=self.webpackChunk||[]).push([[5758],{3595:function(n,r,t){"use strict";var e=t(1625),i=t(640),o=t(3644),a=t(5848),c=t(6900),u=t(1062),f=t(3919),v=t(1136),s=t(2862),d=t(7340),m=t(1940),w=t(7842),l=t(710),k=new JSZip;function p(n){var r;k.load(n);var t=k.file(/.kml$/i)[0];return t&&(r=t.asText()),r}function b(n){var r=n,t=window.location.href;if(t=t.slice(0,t.lastIndexOf("/")+1),0===n.indexOf(t)){var e=new RegExp(n.replace(t,"")+"$","i"),i=k.file(e)[0];i&&(r=URL.createObjectURL(new Blob([i.asArrayBuffer()])))}return r}var z=function(n){function r(r){var t=r||{};t.iconUrlFunction=b,n.call(this,t)}return n&&(r.__proto__=n),r.prototype=Object.create(n&&n.prototype),r.prototype.constructor=r,r.prototype.getType=function(){return"arraybuffer"},r.prototype.readFeature=function(r,t){var e=p(r);return n.prototype.readFeature.call(this,e,t)},r.prototype.readFeatures=function(r,t){var e=p(r);return n.prototype.readFeatures.call(this,e,t)},r}(c.ZP),g=new o.Z({formatConstructors:[z,u.Z,f.Z,v.Z,c.ZP,s.Z]}),h=new e.Z({interactions:(0,a.ce)().extend([g]),layers:[new w.Z({source:new d.Z})],target:"map",view:new i.ZP({center:[0,0],zoom:2})});g.on("addfeatures",(function(n){var r=new m.Z({features:n.features});h.addLayer(new l.Z({source:r})),h.getView().fit(r.getExtent())}));var y=function(n){var r=[];if(h.forEachFeatureAtPixel(n,(function(n){r.push(n)})),r.length>0){var t,e,i=[];for(t=0,e=r.length;t<e;++t){var o=r[t].get("description")||r[t].get("name")||r[t].get("_name")||r[t].get("layer");o&&i.push(o)}document.getElementById("info").innerHTML=i.join("<br/>")||"&nbsp"}else document.getElementById("info").innerHTML="&nbsp;"};h.on("pointermove",(function(n){if(!n.dragging){var r=h.getEventPixel(n.originalEvent);y(r)}})),h.on("click",(function(n){y(n.pixel)}));var R=document.getElementById("download");document.getElementById("download-kmz").addEventListener("click",(function(){var n;n="iceland.kmz",fetch("data/kmz/iceland.kmz").then((function(n){return n.blob()})).then((function(r){navigator.msSaveBlob?navigator.msSaveBlob(r,n):(R.href=URL.createObjectURL(r),R.download=n,R.click())}))}))}},function(n){"use strict";var r;r=3595,n(n.s=r)}]);
//# sourceMappingURL=drag-and-drop-custom-kmz.js.map